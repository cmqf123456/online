{"remainingRequest":"d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\src\\components\\booking\\common\\Booking.vue?vue&type=style&index=0&id=6c71df9b&scoped=true&lang=css","dependencies":[{"path":"d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\src\\components\\booking\\common\\Booking.vue","mtime":1564126163824},{"path":"d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":1562979687013},{"path":"d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1562979690388},{"path":"d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":1562979689638},{"path":"d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1562979686325},{"path":"d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1562979690388}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.container{\n  background-color:#f2f2f2;\n  color:#333;\n  font-size:12px;\n}\n/* 解决外边距溢出 */\n.container:before{\n  content:\"\";\n  display:table;\n}\n.content{\n  padding:40px 20px;\n}\n\n/* 购票栏 */\n.book h3{\n  margin-bottom:10px;\n}\n.bDate ul{\n  margin:0;\n  padding:0;\n  display:flex;\n  text-align:center;\n  list-style-type:none;\n  justify-content:space-between;\n}\n.bDate ul li{\n  background-color:#fff;\n  margin:1px;\n  width:50px;\n  height:50px;\n  box-sizing:border-box;\n  line-height:50px;\n  font-size:13px;\n}\n.bDate>ul li{\n  background-color:#26a2ff;\n  color:#fff;\n  font-size:16px;\n}\n.bDate .dlis ul li{\n  background-color:#fff;\n}\n.active{\n  border:1px solid #26a2ff;\n}\n/*\n.noBook{\n  color:#aaa;\n}\n*/\n.bMsg{\n  background-color:#fff;\n  margin:5px 0;\n  padding:10px 20px;\n  font-size:16px;\n  display:none;\n}\n.showDiv{\n  display:block;\n}\n.notBook{\n  color:#f00;\n  background:url(\"../../../assets/close-circle.png\") no-repeat 0 2px;\n  background-size:20px 20px;\n  padding-left:24px;\n  display:none;\n}\n.okBook{\n  background:url(\"../../../assets/check-circle.png\") no-repeat 0 2px;\n  background-size:20px 20px;\n  padding-left:24px;\n  display:none;\n}\n.noBook{\n  color:#f00;\n  background:url(\"../../../assets/close-circle.png\") no-repeat 0 2px;\n  background-size:20px 20px;\n  padding-left:24px;\n  display:none;\n}\n.showMsg{\n  display:block;\n}\n/* 文字说明栏 */\n.bIntro{\n  padding:0 10px;\n}\n.bIntro p{\n  color:#666;\n}\n",{"version":3,"sources":["Booking.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Booking.vue","sourceRoot":"src\\components\\booking\\common","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!--顶部标题栏-->\r\n    <titlebar leftTitle=\"在线购票\"></titlebar>\r\n    <!--防止顶部溢出\r\n    <div style=\"height:40px;\"></div>-->\r\n    \r\n    <div class=\"content\">\r\n      <!--购票栏-->\r\n      <div class=\"book\">\r\n        <h3>请选择购票日期</h3>\r\n        <div class=\"bDate\">\r\n          <ul>\r\n            <li>周一</li>\r\n            <li>周二</li>\r\n            <li>周三</li>\r\n            <li>周四</li>\r\n            <li>周五</li>\r\n            <li>周六</li>\r\n            <li>周日</li>\r\n          </ul>\r\n          <div class=\"dlis\">\r\n            <ul>\r\n              <li @click=\"getTic(0)\"></li>\r\n              <li @click=\"getTic(1)\"></li>\r\n              <li @click=\"getTic(2)\"></li>\r\n              <li @click=\"getTic(3)\"></li>\r\n              <li @click=\"getTic(4)\"></li>\r\n              <li @click=\"getTic(5)\"></li>\r\n              <li @click=\"getTic(6)\"></li>\r\n            </ul>\r\n            <ul v-show=\"day1>1\">\r\n              <li @click=\"getTic(7)\"></li>\r\n              <li @click=\"getTic(8)\"></li>\r\n              <li @click=\"getTic(9)\"></li>\r\n              <li @click=\"getTic(10)\"></li>\r\n              <li @click=\"getTic(11)\"></li>\r\n              <li @click=\"getTic(12)\"></li>\r\n              <li @click=\"getTic(13)\"></li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        <div class=\"bMsg\" :class=\"showDivClass\">\r\n          <span class=\"okBook\" :class=\"showClass1\" v-text=\"tics\"></span>\r\n          <span class=\"notBook\" :class=\"showClass2\">闭馆</span>\r\n          <span class=\"noBook\" :class=\"showClass3\">当日下午3点之后不可购票</span>\r\n        </div>\r\n        <mt-button @click=\"next\" size=\"large\" type=\"primary\" style=\"margin-top:20px;\" :disabled=\"btnAbl\">下一步</mt-button>\r\n      </div>\r\n      <!--文字说明栏-->\r\n      <div class=\"bIntro\">\r\n        <h5>购票须知</h5>\r\n        <div>\r\n          <p>1. 参观票预售期为7天，数量有限，售完为止。</P>\r\n          <p>2. 微信购票实行实名制，观众须凭第二代身份证信息购票。</P>\r\n          <p>3. 每张身份证每天限购一张参观票或一张亲子参观票(包含：1名成人参观票+1名学生参观票)，参观票仅限预约参观日当天有效。</p>\r\n          <p>4. 凭网上购票成功的提示短信过科技馆</p>\r\n        </div>\r\n        <h5>退票说明</h5>\r\n        <div>\r\n          <p>1. 预约门票在未使用的情况下，可于预约参观日当日24点前在网上平台申请退款，一大一小亲子参观票(包含：1名成人参观票+1名学生参观票)退款时不支持拆分退款。</P>\r\n          <p>2. 如未能退票成功或超过退票期限等特殊情况，请凭本人有效证件至场馆大门口的游客服务中心现场申请退票。申请退票成功后，票款将在10个工作日内原路返回至付款的账户。</P>\r\n          \r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--底部箭头栏\r\n    <bottombar right=\"/BookTics\" left=\"\"></bottombar>-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  // 引入相关子组件\r\n  import TitleBar from \"./TitleBar.vue\";\r\n  import Bottom from \"./Bottom.vue\"\r\n  export default {\r\n    data(){\r\n      return {\r\n        // 剩余票数\r\n        tics:\"可选购\",\r\n        // 购票日期\r\n        gdate:\"\",\r\n        // 当天的星期\r\n        day1:0,\r\n        // 增减样式\r\n        showClass1:{\r\n          showMsg:false,\r\n        },\r\n        showClass2:{\r\n          showMsg:false,\r\n        },\r\n        showClass3:{\r\n          showMsg:false,\r\n        },\r\n        showDivClass:{\r\n          showDiv:false,\r\n        },\r\n        // 按钮样式\r\n        btnAbl:true\r\n      }\r\n    },//data结束\r\n    computed: {\r\n      // 获取li列表，保存在计算属性lis中\r\n      lis(){\r\n        var uls=document.querySelector(\".dlis\");\r\n        // console.log(uls);\r\n        var lis=uls.querySelectorAll(\"ul li\");\r\n        return lis;\r\n      }\r\n    },\r\n    components:{\r\n      \"titlebar\":TitleBar,\r\n      \"bottombar\":Bottom,\r\n    },\r\n    methods:{\r\n      \r\n      getTic(i){\r\n        // 初始化按钮可用\\信息框的可见\\选中框\r\n        \r\n        this.showDivClass.showDiv=false;\r\n        this.btnAbl=true;\r\n        for(var k=0;k<14; k++){\r\n          this.lis[k].className=\"\";\r\n        }\r\n        \r\n        var d1=new Date();\r\n        // console.log(d1);\r\n        // 获取当天小时\r\n        var hour1=d1.getHours();\r\n        // console.log(hour1);\r\n        // 获取当天的星期\r\n        var day1=d1.getDay();\r\n        if(day1==0){\r\n          day1=7;\r\n        }\r\n        \r\n        // console.log(day1);\r\n        // 在当前日期+后6天内，能买票\r\n        if(i>=day1-1&i<=day1+5){\r\n          // 获取选定的购票日期 bdate:2019/07/13\r\n          d1=d1.getFullYear();\r\n          var d2=d1+\"/\"+this.lis[i].innerHTML;\r\n          // 保存购票日期到sessionStorage对象中\r\n          sessionStorage.setItem(\"gdate\",d2);\r\n          console.log(sessionStorage);\r\n          this.gdate=d2;\r\n          // console.log(d2,typeof(d2));\r\n          // 点中显示信息div样式\r\n          this.showDivClass.showDiv=true;\r\n          // 根据i判断是否是周一 如果i%7==0为周一 ，则显示闭馆\r\n          if(i%7==0){\r\n            this.showClass2.showMsg=true;\r\n            this.showClass1.showMsg=false;\r\n            this.showClass3.showMsg=false;\r\n          }else if(i==day1-1&hour1>=13){\r\n            this.showClass3.showMsg=true;\r\n            this.showClass1.showMsg=false;\r\n            this.showClass2.showMsg=false;\r\n          }\r\n          else{\r\n            this.showClass2.showMsg=false;\r\n            this.showClass3.showMsg=false;\r\n            // 发送axios请求获取选中当天已购买的票数\r\n            // this.axios.get(\"booking\",{\r\n            //   params:{\r\n            //     d2,\r\n            //   }\r\n            // }).then(result=>{\r\n            //   console.log(11);\r\n            //   console.log(result);\r\n            // })\r\n            this.showClass1.showMsg=true;\r\n            \r\n          }\r\n          // 修改选中日期的样式\r\n          for(var j=0;j<14; j++){\r\n            this.lis[j].className=\"\";\r\n            // 如果是周一\r\n            // if(j==0||j==7){\r\n            //   this.lis[j].className=\"noBook\";\r\n            // }\r\n          }\r\n          this.lis[i].className=\"active\";\r\n          this.btnAbl=false;\r\n          // 如果是周一\r\n          if(i==0||i==7){\r\n            this.btnAbl=true;\r\n          }else if(i==day1-1&hour1>=15){\r\n            this.btnAbl=true;\r\n          }\r\n        }\r\n\r\n      },\r\n      // 下一步按钮事件\r\n      next(){\r\n        this.$router.push('/BookTics')\r\n      }\r\n    },\r\n    // 自动填写当天往后7天的时间\r\n    mounted(){\r\n      var d1=new Date();\r\n      var mon=d1.getMonth()+1;  //获得月份\r\n      if(mon<10){\r\n        mon=\"0\"+mon;\r\n      }\r\n      var d=d1.getDate();       //获得天数\r\n      if(d<10){\r\n        d=\"0\"+d;\r\n      }\r\n      var day1=d1.getDay();     //获得星期\r\n      // console.log(day1);\r\n      if(day1==0){\r\n        day1=7;\r\n      }\r\n      this.day1=day1;\r\n      var t=d1.getHours();      //获得小时\r\n      // console.log(mon,d,t,day1);\r\n      for(var i=day1-1; i<=(day1+5); i++){\r\n        // console.log(i);\r\n        this.lis[i].innerHTML=mon+\"/\"+d;\r\n        d++;\r\n        if(d==32){\r\n          d=1;\r\n          mon++;\r\n        }\r\n      }\r\n    },\r\n    created(){\r\n      // 清除sessionStorage中已选定的购票日期\r\n      sessionStorage.removeItem(\"gdate\");\r\n      // 页面执行到哪一个页面，用状态码记录\r\n      sessionStorage.setItem(\"pageNo1\",1);\r\n      /*\r\n      if(!sessionStorage.getItem(\"uname\")){\r\n        this.$messagebox(\"请先登录\")\r\n          .then(action=>{\r\n            this.$router.push(\"/Login\");\r\n          })\r\n          .catch(err=>{console.log(err)}\r\n        );\r\n      }\r\n      console.log(sessionStorage);\r\n      */\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .container{\r\n    background-color:#f2f2f2;\r\n    color:#333;\r\n    font-size:12px;\r\n  }\r\n  /* 解决外边距溢出 */\r\n  .container:before{\r\n    content:\"\";\r\n    display:table;\r\n  }\r\n  .content{\r\n    padding:40px 20px;\r\n  }\r\n  \r\n  /* 购票栏 */\r\n  .book h3{\r\n    margin-bottom:10px;\r\n  }\r\n  .bDate ul{\r\n    margin:0;\r\n    padding:0;\r\n    display:flex;\r\n    text-align:center;\r\n    list-style-type:none;\r\n    justify-content:space-between;\r\n  }\r\n  .bDate ul li{\r\n    background-color:#fff;\r\n    margin:1px;\r\n    width:50px;\r\n    height:50px;\r\n    box-sizing:border-box;\r\n    line-height:50px;\r\n    font-size:13px;\r\n  }\r\n  .bDate>ul li{\r\n    background-color:#26a2ff;\r\n    color:#fff;\r\n    font-size:16px;\r\n  }\r\n  .bDate .dlis ul li{\r\n    background-color:#fff;\r\n  }\r\n  .active{\r\n    border:1px solid #26a2ff;\r\n  }\r\n  /*\r\n  .noBook{\r\n    color:#aaa;\r\n  }\r\n  */\r\n  .bMsg{\r\n    background-color:#fff;\r\n    margin:5px 0;\r\n    padding:10px 20px;\r\n    font-size:16px;\r\n    display:none;\r\n  }\r\n  .showDiv{\r\n    display:block;\r\n  }\r\n  .notBook{\r\n    color:#f00;\r\n    background:url(\"../../../assets/close-circle.png\") no-repeat 0 2px;\r\n    background-size:20px 20px;\r\n    padding-left:24px;\r\n    display:none;\r\n  }\r\n  .okBook{\r\n    background:url(\"../../../assets/check-circle.png\") no-repeat 0 2px;\r\n    background-size:20px 20px;\r\n    padding-left:24px;\r\n    display:none;\r\n  }\r\n  .noBook{\r\n    color:#f00;\r\n    background:url(\"../../../assets/close-circle.png\") no-repeat 0 2px;\r\n    background-size:20px 20px;\r\n    padding-left:24px;\r\n    display:none;\r\n  }\r\n  .showMsg{\r\n    display:block;\r\n  }\r\n  /* 文字说明栏 */\r\n  .bIntro{\r\n    padding:0 10px;\r\n  }\r\n  .bIntro p{\r\n    color:#666;\r\n  }\r\n</style>"]}]}