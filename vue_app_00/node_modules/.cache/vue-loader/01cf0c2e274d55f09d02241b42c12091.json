{"remainingRequest":"d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\src\\components\\booking\\common\\BookCart.vue?vue&type=style&index=0&id=1d2b6fd7&scoped=true&lang=css","dependencies":[{"path":"d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\src\\components\\booking\\common\\BookCart.vue","mtime":1563968504984},{"path":"d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":1562979687013},{"path":"d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1562979690388},{"path":"d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":1562979689638},{"path":"d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1562979686325},{"path":"d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1562979690388}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.container{\n  background-color:#f2f2f2;\n  color:#333;\n  font-size:14px;\n}\n.container:before{\n  content:\"\";\n  display:table;\n}\n.content{\n  padding:50px 0px;\n}\n/* 购物车头部样式 */\n.cartTop{\n  display:flex;\n  justify-content:space-between;\n  background-color:#26a2ff;\n  color:#fff;\n  padding:0 20px;\n}\n.cartTop p{\n  margin:0;\n  height:40px;\n  line-height:40px;\n}\n.cartTop p:first-child{\n  font-size:16px;\n}\n.cartDate{\n  padding:10px 20px;\n  background-color:#fff;\n  font-size:16px;\n}\n/* 购物车样式 */\n.cart{\n  margin:5px 0;\n  background-color:#fff;\n  padding:0 20px;\n}\n.cart ul{\n  display:flex;\n  margin:0;\n  padding:0;\n  list-style-type:none;\n  justify-content:space-between;\n  border-bottom:1px solid #eee;\n  height:40px;\n  line-height:40px;\n}\n.cart>ul:first-child{\n  color:#aaa;\n  border:none;\n}\n.cart ul li{\n  width:50px;\n  text-align:center;\n}\n.cart ul li:first-child{\n  width:100px;\n  text-align:left;\n}\n.cart ul li:last-child{\n  text-align:right;\n}\n.cart::after{\n  content:\"\";\n  display:table;\n}\n.cart p{\n  font-size:16px;\n}\n.cart p span{\n  color:#aaa;\n}\n/* 提示信息样式 */\n.cartMsg p{\n  padding:0 20px;\n  font-size:12px;\n}\n/* 结算按钮和信息 */\n.cartBtm{\n  position:fixed;\n  bottom:0;\n  width:100%;\n  display:flex;\n  text-align:center;\n}\n.cartBtm p{\n  height:50px;\n  line-height:50px;\n  font-size:20px;\n  margin:0;\n}\n.cartBtm p:first-child{\n  width:50%;\n  color:#e6a062;\n}\n.cartBtm p+p{\n  background-color:#e6a062;\n  width:50%;\n  color:#fff;\n}\n",{"version":3,"sources":["BookCart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BookCart.vue","sourceRoot":"src\\components\\booking\\common","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <titlebar leftTitle=\"在线购票\"></titlebar>\r\n    <!--防止顶部溢出\r\n    <div style=\"height:40px;\"></div>-->\r\n    <div class=\"content\">\r\n      <!--头部-->\r\n      <div class=\"cartTop\">\r\n        <p>订单结算</p>\r\n        <p>返回修改</p>\r\n      </div>\r\n      <!--购票日期-->\r\n      <div class=\"cartDate\">购票日期：<span>{{gdate}}</span></div>\r\n      <!--购物车主体-->\r\n      <div class=\"cart\">\r\n        <ul>\r\n          <li>门票类型</li>\r\n          <li>数量</li>\r\n          <li>单价</li>\r\n          <li>小计</li>\r\n        </ul>\r\n        <ul v-for=\"(elem,i) of cart\" :key=\"i\">\r\n          <!--获取票种-->\r\n          <li>{{elem[0].book}}</li>\r\n          <!--获取每个票种对应的张数-->\r\n          <li>{{elem.length}}</li>\r\n          <!--获取每个票种对应的单价-->\r\n          <li>¥{{elem[0].bprice.toFixed(2)}}</li>\r\n          <!--通过获取每个票种对应的小计-->\r\n          <li>¥{{(elem.length*elem[0].bprice).toFixed(2)}}</li>\r\n        </ul>\r\n        <ul>\r\n          <li>合计</li>\r\n          <li>{{totalTics}}</li>\r\n          <li></li>\r\n          <li>¥{{total.toFixed(2)}}</li>\r\n        </ul>\r\n        <!-- <p>手机号：<span>{{phone}}</span></p> -->\r\n      </div>\r\n      <!--提示信息\r\n      <div class=\"cartMsg\">\r\n        <p>\r\n          温馨提示：订单提交成功，请您务必在15分钟内完成支付，否则您的订单将自动取消！\r\n        </p>\r\n      </div>-->\r\n      <!--结算按钮和信息-->\r\n      <div class=\"cartBtm\">\r\n        <!--计算属性算出总和total-->\r\n        <p>合计：¥<span>{{total.toFixed(2)}}</span></p>\r\n        <p><span @click=\"next\">立即支付</span></p>\r\n      </div>\r\n    </div>\r\n    <!--底部箭头栏-->\r\n    <div></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import TitleBar from \"./TitleBar.vue\"\r\n  export default {\r\n    data(){\r\n      return {\r\n        gdate:\"\",\r\n        // 购物车\r\n        cart:[],\r\n      }\r\n    },//data结束\r\n    components:{\r\n      \"titlebar\":TitleBar\r\n    },\r\n    created(){\r\n      this.gdate=sessionStorage.getItem(\"gdate\");\r\n      // 获取购物车字符串\r\n      var str=sessionStorage.getItem(\"cart\");\r\n      // 将字符串转为数组\r\n      var cart=JSON.parse(str);\r\n      // console.log(cart);\r\n      // 将购物车数组放入data数据中\r\n      this.cart=cart;\r\n      console.log(this.cart);\r\n      for(var elem of cart){\r\n\r\n      }\r\n    },\r\n    methods:{\r\n      next(){\r\n        // 调出确认框\r\n        this.$messagebox.confirm(\"确认支付？\")\r\n        .then(active=>{\r\n          // 1. 点击确认后\r\n          for(var elem of this.cart){\r\n            // 修改状态码\r\n            var obj=elem[0];\r\n            obj.bstatus=1;\r\n            // console.log(obj);\r\n            // 再插入数据库\r\n            this.axios.get(\"cart\",{params:obj})\r\n            .then(result=>{\r\n              console.log(result);\r\n              this.$toast(\"成功支付 ¥\"+this.total.toFixed(2));\r\n              this.$router.push(\"/Orderlist\");\r\n            });\r\n          }\r\n        }).catch(err=>{\r\n          // 2. 点击取消后\r\n          if(err==\"cancel\"){\r\n            // console.log(333);\r\n            // 插入数据库\r\n            for(var elem of this.cart){\r\n              var obj=elem[0];\r\n              this.axios.get(\"cart\",{params:obj})\r\n              .then(result=>{\r\n                console.log(result);\r\n                this.$toast(\"订单待支付\");\r\n                this.$router.push(\"/Orderlist\");\r\n              });\r\n            }\r\n            \r\n          }\r\n        })\r\n      }\r\n    },\r\n    // 计算属性\r\n    computed: {\r\n      // 计算总价格\r\n      total(){\r\n        var sum=0;\r\n        for(var elem of this.cart){\r\n          sum+=elem.length*elem[0].bprice;\r\n        }\r\n        return sum;\r\n      },\r\n      // 计算总票数\r\n      totalTics(){\r\n        var sum=0;\r\n        for(var elem of this.cart){\r\n          sum+=elem.length;\r\n        }\r\n        return sum;\r\n      },\r\n    },\r\n\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .container{\r\n    background-color:#f2f2f2;\r\n    color:#333;\r\n    font-size:14px;\r\n  }\r\n  .container:before{\r\n    content:\"\";\r\n    display:table;\r\n  }\r\n  .content{\r\n    padding:50px 0px;\r\n  }\r\n  /* 购物车头部样式 */\r\n  .cartTop{\r\n    display:flex;\r\n    justify-content:space-between;\r\n    background-color:#26a2ff;\r\n    color:#fff;\r\n    padding:0 20px;\r\n  }\r\n  .cartTop p{\r\n    margin:0;\r\n    height:40px;\r\n    line-height:40px;\r\n  }\r\n  .cartTop p:first-child{\r\n    font-size:16px;\r\n  }\r\n  .cartDate{\r\n    padding:10px 20px;\r\n    background-color:#fff;\r\n    font-size:16px;\r\n  }\r\n  /* 购物车样式 */\r\n  .cart{\r\n    margin:5px 0;\r\n    background-color:#fff;\r\n    padding:0 20px;\r\n  }\r\n  .cart ul{\r\n    display:flex;\r\n    margin:0;\r\n    padding:0;\r\n    list-style-type:none;\r\n    justify-content:space-between;\r\n    border-bottom:1px solid #eee;\r\n    height:40px;\r\n    line-height:40px;\r\n  }\r\n  .cart>ul:first-child{\r\n    color:#aaa;\r\n    border:none;\r\n  }\r\n  .cart ul li{\r\n    width:50px;\r\n    text-align:center;\r\n  }\r\n  .cart ul li:first-child{\r\n    width:100px;\r\n    text-align:left;\r\n  }\r\n  .cart ul li:last-child{\r\n    text-align:right;\r\n  }\r\n  .cart::after{\r\n    content:\"\";\r\n    display:table;\r\n  }\r\n  .cart p{\r\n    font-size:16px;\r\n  }\r\n  .cart p span{\r\n    color:#aaa;\r\n  }\r\n  /* 提示信息样式 */\r\n  .cartMsg p{\r\n    padding:0 20px;\r\n    font-size:12px;\r\n  }\r\n  /* 结算按钮和信息 */\r\n  .cartBtm{\r\n    position:fixed;\r\n    bottom:0;\r\n    width:100%;\r\n    display:flex;\r\n    text-align:center;\r\n  }\r\n  .cartBtm p{\r\n    height:50px;\r\n    line-height:50px;\r\n    font-size:20px;\r\n    margin:0;\r\n  }\r\n  .cartBtm p:first-child{\r\n    width:50%;\r\n    color:#e6a062;\r\n  }\r\n  .cartBtm p+p{\r\n    background-color:#e6a062;\r\n    width:50%;\r\n    color:#fff;\r\n  }\r\n</style>"]}]}