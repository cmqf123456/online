{"remainingRequest":"d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\src\\components\\booking\\common\\Orderlist.vue?vue&type=script&lang=js","dependencies":[{"path":"d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\src\\components\\booking\\common\\Orderlist.vue","mtime":1564118933841},{"path":"d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1562979686325},{"path":"d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1562979686216},{"path":"d:\\xampp\\htdocs\\tml1903\\online\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1562979690388}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport TitleBar from \"./TitleBar.vue\";\nexport default {\n  data: function data() {\n    return {\n      list: [],\n      num: 0,\n      uname: \"\"\n    };\n  },\n  components: {\n    \"titlebar\": TitleBar\n  },\n  created: function created() {\n    var _this = this;\n\n    // 根据num的值来判定显示哪一个内容\n    // 如果没有用户登录，强制登录\n    if (sessionStorage.getItem(\"uid\") == null) {\n      this.num = 1; // console.log(sessionStorage.getItem(\"uid\"));\n      // console.log(this.num);\n      // console.log(this.num==1);\n    } else {\n      var url = \"info\";\n      this.axios.get(url, {\n        param: {}\n      }).then(function (result) {\n        // console.log(result.data);\n        // 如果没有查到数据，显示暂无数据\n        // 如果查到数据，显示列表\n        _this.num = result.data.length == 0 ? 2 : 3; // console.log(this.num);\n\n        var list = result.data;\n        _this.list = list;\n      });\n      this.uname = sessionStorage.getItem(\"uname\");\n    }\n  },\n  methods: {\n    toLogin: function toLogin() {\n      // 将当前的路由地址保存在sessionStorage中，登录后可跳回此页面\n      sessionStorage.setItem(\"jumpRouter\", \"/Orderlist\");\n      this.$router.push(\"/Login\");\n    },\n    toHome: function toHome() {\n      this.$router.push(\"/Home\");\n    },\n    // 修改订单状态\n    openConfirm: function openConfirm(key) {\n      if (key == 1) {\n        this.$messagebox.prompt(\"请输入退款理由\").then(function (action) {\n          var btn = document.getElementById(\"btn\");\n          btn.innerHTML = \"订单已退款\";\n        }).catch(function (err) {\n          console.log(err);\n        });\n      } else if (key == 0) {\n        this.$messagebox.prompt(\"请输入付款密码\").then(function (action) {\n          var btn = document.getElementById(\"btn\");\n          btn[key].innerHTML = \"订单已付款\";\n          console.log(btn);\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }\n    }\n  }\n};",{"version":3,"sources":["Orderlist.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,OAAA,QAAA,MAAA,gBAAA;AACA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA,YAAA,EADA;AAEA,WAAA,CAFA;AAGA,aAAA;AAHA,KAAA;AAKA,GAPA;AAQA,cAAA;AACA,gBAAA;AADA,GARA;AAWA,SAXA,qBAWA;AAAA;;AACA;AACA;AACA,QAAA,eAAA,OAAA,CAAA,KAAA,KAAA,IAAA,EAAA;AACA,WAAA,GAAA,GAAA,CAAA,CADA,CAEA;AACA;AACA;AACA,KALA,MAKA;AACA,UAAA,MAAA,MAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA;AAAA,eAAA;AAAA,OAAA,EAAA,IAAA,CAAA,kBAAA;AACA;AACA;AACA;AACA,cAAA,GAAA,GAAA,OAAA,IAAA,CAAA,MAAA,IAAA,CAAA,GAAA,CAAA,GAAA,CAAA,CAJA,CAKA;;AACA,YAAA,OAAA,OAAA,IAAA;AACA,cAAA,IAAA,GAAA,IAAA;AACA,OARA;AASA,WAAA,KAAA,GAAA,eAAA,OAAA,CAAA,OAAA,CAAA;AACA;AACA,GAhCA;AAiCA,WAAA;AACA,WADA,qBACA;AACA;AACA,qBAAA,OAAA,CAAA,YAAA,EAAA,YAAA;AAEA,WAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA,KANA;AAOA,UAPA,oBAOA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,OAAA;AACA,KATA;AAUA;AACA,eAXA,uBAWA,GAXA,EAWA;AAEA,UAAA,OAAA,CAAA,EAAA;AACA,aAAA,WAAA,CAAA,MAAA,CAAA,SAAA,EAAA,IAAA,CAAA,kBAAA;AACA,cAAA,MAAA,SAAA,cAAA,CAAA,KAAA,CAAA;AACA,cAAA,SAAA,GAAA,OAAA;AAEA,SAJA,EAKA,KALA,CAKA,eAAA;AACA,kBAAA,GAAA,CAAA,GAAA;AACA,SAPA;AAQA,OATA,MASA,IAAA,OAAA,CAAA,EAAA;AACA,aAAA,WAAA,CAAA,MAAA,CAAA,SAAA,EAAA,IAAA,CAAA,kBAAA;AACA,cAAA,MAAA,SAAA,cAAA,CAAA,KAAA,CAAA;AACA,cAAA,GAAA,EAAA,SAAA,GAAA,OAAA;AACA,kBAAA,GAAA,CAAA,GAAA;AACA,SAJA,EAKA,KALA,CAKA,eAAA;AACA,kBAAA,GAAA,CAAA,GAAA;AACA,SAPA;AAQA;AACA;AAhCA;AAjCA,CAAA","sourcesContent":["<template>\r\n    <div>\r\n        <!--顶部标题栏-->\r\n        <titlebar leftTitle=\"订单查询\"></titlebar>\r\n        <div class=\"c2\">\r\n            <div v-show=\"uname.length>0\" class=\"d1\">\r\n                <span>欢迎回来：{{uname}}</span> \r\n                <span @click=\"toHome\">返回首页</span>\r\n            </div>\r\n            <div class=\"d2\" v-if=\"num==1\" @click=\"toLogin\">请先登录</div>\r\n            <div class=\"d3\" v-else-if=\"num==2\">暂无数据</div>\r\n            <div v-else=\"num==3\">\r\n                <div id=\"content\" v-for=\"(item,i) of list\" :key=\"i\">\r\n                    <h4>购票种类:{{item.book}}</h4>\r\n                    <p>购票日期：{{item.bdate}}</p>\r\n                    <p class=\"c1\">\r\n                        主展厅 1\r\n                    <span>￥{{(item.bprice).toFixed(2)}}</span>\r\n                    </p>\r\n                    <div class=\"btns\">\r\n                        <span id=\"btn\">{{item.bstatus > 0 ? \"订单已支付\" : \"订单待付款\"}}</span>\r\n                        <button @click=\"openConfirm(item.bstatus)\" >{{item.bstatus > 0 ? \"申请退款\" : \"立即支付\"}}</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport TitleBar from \"./TitleBar.vue\";\r\nexport default {\r\n    data(){\r\n        return{\r\n            list:[],\r\n            num:0,\r\n            uname:\"\"\r\n        }  \r\n    },\r\n    components:{\r\n        \"titlebar\":TitleBar,\r\n    },\r\n    created(){\r\n        // 根据num的值来判定显示哪一个内容\r\n        // 如果没有用户登录，强制登录\r\n        if(sessionStorage.getItem(\"uid\")==null){\r\n            this.num=1;\r\n            // console.log(sessionStorage.getItem(\"uid\"));\r\n            // console.log(this.num);\r\n            // console.log(this.num==1);\r\n        }else{\r\n            var url=\"info\";\r\n            this.axios.get(url,{param:{}}).then(result=>{\r\n                // console.log(result.data);\r\n                // 如果没有查到数据，显示暂无数据\r\n                // 如果查到数据，显示列表\r\n                this.num= result.data.length==0 ? 2 : 3;\r\n                // console.log(this.num);\r\n                var list=result.data;\r\n                this.list=list;\r\n            })\r\n            this.uname=sessionStorage.getItem(\"uname\");\r\n        }\r\n    },\r\n    methods:{\r\n        toLogin(){\r\n             // 将当前的路由地址保存在sessionStorage中，登录后可跳回此页面\r\n            sessionStorage.setItem(\"jumpRouter\",\"/Orderlist\");\r\n            \r\n            this.$router.push(\"/Login\");\r\n        },\r\n        toHome(){\r\n            this.$router.push(\"/Home\");\r\n        },\r\n        // 修改订单状态\r\n    openConfirm(key){\r\n        \r\n        if(key==1){\r\n             this.$messagebox.prompt(\"请输入退款理由\").then(action=>{\r\n                 var btn=document.getElementById(\"btn\");\r\n                 btn.innerHTML=\"订单已退款\"\r\n                \r\n             })\r\n             .catch(err=>{\r\n             console.log(err);\r\n             });\r\n           }else if(key==0){\r\n             this.$messagebox.prompt(\"请输入付款密码\").then(action=>{\r\n                 var btn=document.getElementById(\"btn\");\r\n                  btn[key].innerHTML=\"订单已付款\"\r\n                  console.log(btn)\r\n             })\r\n             .catch(err=>{\r\n             console.log(err);\r\n             });\r\n        }\r\n    }\r\n    \r\n}   \r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .d1{\r\n        height:40px;\r\n        background:#fff;\r\n        line-height:40px;\r\n        font-size:20px;\r\n    }\r\n    div{\r\n        background:#f2f2f2;\r\n    }\r\n    .c2{\r\n        padding-top:40px;\r\n    }\r\n    .d1{\r\n        display:flex;\r\n        justify-content:space-between;\r\n        background:#f2f2f2;\r\n    }\r\n    .d1>span{\r\n        background:#f2f2f2;\r\n        color:#333;\r\n    }\r\n    .d1>span:nth-child(2){\r\n        color:#26a2ff;\r\n    }\r\n    .d2{\r\n        text-align:center;\r\n        color:red;\r\n        margin-top:40px;\r\n    }\r\n    .d3{\r\n        text-align:center;\r\n        padding:10px;\r\n    }\r\n    \r\n    \r\n    \r\n    #content{\r\n        margin:15px;\r\n        margin-top:15px;\r\n        padding-top:1px;\r\n        padding-bottom:40px;\r\n        background:#fff;\r\n        border:1px solid #fff;\r\n        border-radius:5px;\r\n    }\r\n    p{\r\n        margin:8px 0 8px 15px;\r\n        background:#fff;\r\n    }\r\n    h4{\r\n        margin:8px 0 8px 15px;\r\n        background:#fff;\r\n    }\r\n    .btns{\r\n        display:flex;\r\n        justify-content:space-between;\r\n        background:#fff;\r\n    }\r\n    button{\r\n        margin:5px 20px 14px 15px;\r\n        font-size:16px;\r\n        color:#E48E06;\r\n        border:1px solid #E48E06;\r\n        border-radius:3px;\r\n        background:#fff;\r\n    }\r\n    #b3{\r\n        color:#3BA8E0;\r\n        border:1px solid #3BA8E0;\r\n    }\r\n    span{\r\n      margin:5px 20px 14px 15px;\r\n        background:#fff;\r\n        font-size:16px;\r\n        color:#E48E06;\r\n    }\r\n    #s1{\r\n        font-size:16px;\r\n        color:#E48E06;\r\n        margin:9px 0px 0px 15px\r\n    }\r\n    .c1{\r\n        font-size:16px;\r\n        display:flex;\r\n        justify-content:space-between;\r\n        margin-bottom:-10px;\r\n    }\r\n    .c1>span{\r\n        font-size:26px;\r\n    }\r\n</style>"],"sourceRoot":"src\\components\\booking\\common"}]}